<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Chat | Hub</title>
    <link rel="stylesheet" href="../assets/css/variables.css">
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link rel="stylesheet" href="../assets/css/layout.css">
    <style>
        .full-screen-container {
            display: grid;
            grid-template-rows: auto 1fr;
            height: 100vh;
            width: 100vw;
            padding: 20px;
            overflow: hidden;
        }
        .home-grid {
            display: grid;
            grid-template-columns: 300px 1fr 320px;
            gap: 20px;
            height: 100%;
            overflow: hidden;
        }
        .scroll-area { overflow-y: auto; height: 100%; }
        .mention-tag { color: var(--secondary-accent); font-weight: 900; }
        
        /* DM Popup Styles */
        #dm-popup {
            position: fixed; bottom: 20px; right: 20px;
            width: 300px; height: 400px; z-index: 1000;
            display: flex; flex-direction: column;
        }
    </style>
</head>
<body>
    <div class="full-screen-container">
        <nav class="neo-box navbar">
            <div class="brand" onclick="window.location.href='home.html'" style="cursor:pointer">ROOM CHAT</div>
            <div class="nav-controls">
                <div id="user-avatar" class="avatar-circle" onclick="window.location.href='dashboard.html'">?</div>
            </div>
        </nav>

        <div class="home-grid">
            <aside class="neo-box scroll-area">
                <h3>NAVIGATE</h3>
                <div class="auth-tabs">
                    <button class="neo-btn tab active" onclick="showTab('rooms')">ROOMS</button>
                    <button class="neo-btn tab" onclick="showTab('dms')">DMS</button>
                </div>
                <div id="rooms-nav-content">
                    <div id="topics-list"></div>
                    <hr style="border:1px solid black; margin:15px 0">
                    <div id="rooms-list"></div>
                </div>
                <div id="dms-nav-content" class="hidden">
                    <div id="dm-rooms-list"></div>
                </div>
            </aside>

            <main class="neo-box scroll-area" style="display:flex; flex-direction:column">
                <div id="room-header" style="border-bottom:3px solid black; padding-bottom:10px">
                    <h2 id="active-room-name">TERMINAL IDLE</h2>
                </div>
                <div id="messages-container" style="flex:1; margin-top:15px" class="scroll-area"></div>
                <form id="chat-form" class="hidden" onsubmit="window.sendMessage(event)" style="display:flex; gap:10px; padding-top:15px">
                    <input type="text" id="msg-body" placeholder="Transmission..." style="flex:1; border:3px solid black; padding:10px">
                    <button type="submit" class="neo-btn" style="background:var(--success-color)">SEND</button>
                </form>
            </main>

            <aside class="neo-box scroll-area">
                <h3>FRIENDS</h3>
                <div id="friends-list"></div>
                <hr style="border:1px solid black; margin:15px 0">
                <h3>GLOBAL SIGNAL</h3>
                <div id="activity-feed"></div>
            </aside>
        </div>
    </div>

    <div id="dm-popup" class="neo-box hidden">
        <div style="display:flex; justify-content:space-between; border-bottom:2px solid black">
            <span id="dm-target-name">@USER</span>
            <button onclick="closeDMPopup()" style="background:none; border:none; cursor:pointer; font-weight:900">X</button>
        </div>
        <div id="dm-popup-messages" class="scroll-area" style="flex:1; font-size:0.8rem; margin:10px 0"></div>
        <form onsubmit="sendPopupDM(event)" style="display:flex; gap:5px">
            <input type="text" id="popup-dm-input" style="flex:1; border:2px solid black; padding:5px">
            <button type="submit" class="neo-btn" style="padding:5px">-></button>
        </form>
    </div>

    <script type="module" src="../scripts/home.js"></script>
</body>
</html>