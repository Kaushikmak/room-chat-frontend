<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Chat | Login</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/variables.css">
    <link rel="stylesheet" href="../assets/css/layout.css">
    <link rel="stylesheet" href="../assets/css/theme.css"> 
</head>
<body>
    <div class="main-container">
        <div class="neo-box" style="margin-bottom: 20px; text-align: center; background: var(--main-accent); transform: rotate(1deg);">
            <h1 style="margin: 0; font-size: 2.5rem; text-shadow: 3px 3px 0 white;">ROOM CHAT</h1>
        </div>

        <div class="neo-box auth-container">
    <div class="auth-tabs">
        <button id="tab-login" class="neo-btn tab active" onclick="switchTab('login')">LOGIN</button>
        <button id="tab-register" class="neo-btn tab" onclick="switchTab('register')">SIGN UP</button>
    </div>

    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
        <button onclick="initiateSocialLogin('google')" class="neo-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 10px;">
            <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M21.35 11.1h-9.17v2.73h6.51c-.33 3.81-3.5 5.44-6.5 5.44C8.36 19.27 5 16.25 5 12c0-4.1 3.2-7.27 7.2-7.27c3.09 0 4.9 1.97 4.9 1.97L19 4.72S16.56 2 12.1 2C6.42 2 2.03 6.8 2.03 12c0 5.05 4.13 10 10.22 10c5.35 0 9.25-3.67 9.25-9.09c0-1.15-.15-1.81-.15-1.81Z"/></svg>
            GOOGLE
        </button>
        <button onclick="initiateSocialLogin('github')" class="neo-btn" style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 10px;">
            <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>
            GITHUB
        </button>
    </div>

    <div style="text-align: center; margin-bottom: 20px; font-weight: bold; opacity: 0.5;">— OR —</div>

    <form id="login-form" class="auth-form active" onsubmit="handleLogin(event)">
        <div class="input-group">
            <label>USERNAME</label>
            <input type="text" id="login-username" required>
        </div>
        <div class="input-group">
            <label>PASSWORD</label>
            <input type="password" id="login-password" required>
        </div>
        <button type="submit" class="neo-btn" style="background: var(--success-color); width: 100%;">ENTER</button>
    </form>

    <form id="register-form" class="auth-form" onsubmit="handleRegister(event)">
        <div class="input-group">
            <label>USERNAME</label>
            <input type="text" id="reg-username" required>
        </div>
        <div class="input-group">
            <label>EMAIL</label>
            <input type="email" id="reg-email" required>
        </div>
        <div class="input-group">
            <label>PASSWORD</label>
            <input type="password" id="reg-password" required>
        </div>
        <button type="submit" class="neo-btn" style="background: var(--success-color); width: 100%;">CREATE</button>
    </form>

    <div id="status-message" class="hidden" style="margin-top: 20px; padding: 10px;"></div>
</div>
        
        <a href="../index.html" style="margin-top: 20px; font-weight: 800; color: var(--text-color); text-decoration: none; border-bottom: 2px solid black;">← BACK TO LOBBY</a>
    </div>

    <script type="module" src="../scripts/login.js"></script>
    <script>
    if ('serviceWorker' in navigator) {
        // Register SW from the root level
        navigator.serviceWorker.register('../sw.js') 
            .then(() => console.log('Service Worker Active'))
            .catch(err => console.error('SW Fail:', err));
    }
</script>
</body>
</html>